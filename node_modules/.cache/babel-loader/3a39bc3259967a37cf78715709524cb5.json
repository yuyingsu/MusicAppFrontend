{"ast":null,"code":"import Axios from \"axios\";\nimport Cookie from 'js-cookie';\nimport { USER_LOGOUT_REQUEST, USER_LOGOUT_SUCCESS, USER_LOGOUT_FAIL, USER_REGISTER_REQUEST, USER_REGISTER_SUCCESS, USER_REGISTER_FAIL, USER_SIGNIN_REQUEST, USER_SIGNIN_SUCCESS, USER_SIGNIN_FAIL, GET_BIO_REQUEST, GET_BIO_SUCCESS, GET_BIO_FAIL, UPDATE_BIO_REQUEST, UPDATE_BIO_SUCCESS, UPDATE_BIO_FAIL, UPLOAD_PIC_REQUEST, UPLOAD_PIC_SUCCESS, UPLOAD_PIC_FAIL, GET_PIC_REQUEST, GET_PIC_SUCCESS, GET_PIC_FAIL } from \"../constants/userConstants\";\n\nconst logout = () => async (dispatch, getState) => {\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n  Cookie.remove(\"userInfo\");\n  dispatch({\n    type: USER_LOGOUT_REQUEST\n  });\n\n  try {\n    await Axios.post(\"https://tangerinemusic.herokuapp.com/signout\", {}, {\n      headers: {\n        \"Authorization\": ' Bearer ' + userInfo.access_token\n      }\n    });\n    dispatch({\n      type: USER_LOGOUT_SUCCESS\n    });\n  } catch (error) {\n    dispatch({\n      type: USER_LOGOUT_FAIL,\n      payload: error.message\n    });\n  }\n};\n\nconst register = (username, email, password, bio, addressId) => async dispatch => {\n  dispatch({\n    type: USER_REGISTER_REQUEST,\n    payload: {\n      username,\n      email,\n      password,\n      bio,\n      addressId\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post(\"https://tangerinemusic.herokuapp.com/register\", {\n      username,\n      email,\n      password,\n      bio,\n      address_id: addressId\n    });\n    dispatch({\n      type: USER_REGISTER_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error.response.data['message']);\n    dispatch({\n      type: USER_REGISTER_FAIL,\n      payload: error.response.data['message']\n    });\n  }\n};\n\nconst signin = (username, password) => async dispatch => {\n  dispatch({\n    type: USER_SIGNIN_REQUEST,\n    payload: {\n      username,\n      password\n    }\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.post(\"https://tangerinemusic.herokuapp.com/signin\", {\n      username,\n      password\n    });\n    dispatch({\n      type: USER_SIGNIN_SUCCESS,\n      payload: data\n    });\n    Cookie.set('userInfo', JSON.stringify(data));\n  } catch (error) {\n    dispatch({\n      type: USER_SIGNIN_FAIL,\n      payload: error.response.data['message']\n    });\n  }\n};\n\nconst updateBio = bio => async (dispatch, getState) => {\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n  const user_id = userInfo.user_id;\n  dispatch({\n    type: UPDATE_BIO_REQUEST\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.put(\"https://tangerinemusic.herokuapp.com/updatebio/\" + user_id, {\n      bio\n    }, {\n      headers: {\n        \"Authorization\": ' Bearer ' + userInfo.access_token\n      }\n    });\n    dispatch({\n      type: UPDATE_BIO_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error.response);\n    dispatch({\n      type: UPDATE_BIO_FAIL,\n      payload: error.response.data['message']\n    });\n  }\n};\n\nconst getBio = user_id => async dispatch => {\n  dispatch({\n    type: GET_BIO_REQUEST\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.get(\"https://tangerinemusic.herokuapp.com/userbio/\" + user_id, {});\n    dispatch({\n      type: GET_BIO_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error.response);\n    dispatch({\n      type: GET_BIO_FAIL,\n      payload: error.message\n    });\n  }\n};\n\nconst uploadPic = data1 => async (dispatch, getState) => {\n  const {\n    userSignin: {\n      userInfo\n    }\n  } = getState();\n  dispatch({\n    type: UPLOAD_PIC_REQUEST\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.put(\"https://tangerinemusic.herokuapp.com/upload/avatar\", data1, {\n      headers: {\n        \"Authorization\": ' Bearer ' + userInfo.access_token,\n        'Content-Type': 'multipart/form-data'\n      }\n    });\n    dispatch({\n      type: UPLOAD_PIC_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error.response);\n    dispatch({\n      type: UPLOAD_PIC_FAIL,\n      payload: error.message\n    });\n  }\n};\n\nconst userPic = user_id => async (dispatch, getState) => {\n  dispatch({\n    type: GET_PIC_REQUEST\n  });\n\n  try {\n    const {\n      data\n    } = await Axios.get(\"https://tangerinemusic.herokuapp.com/avatar/\" + user_id, {});\n    dispatch({\n      type: GET_PIC_SUCCESS,\n      payload: data\n    });\n  } catch (error) {\n    console.log(error.response);\n    dispatch({\n      type: GET_PIC_FAIL,\n      payload: error.message\n    });\n  }\n};\n\nexport { logout, register, signin, updateBio, getBio, uploadPic, userPic };","map":{"version":3,"sources":["C:/Users/yuyin/onedrive/desktop/MusicappFrontendDeployment/src/actions/userActions.js"],"names":["Axios","Cookie","USER_LOGOUT_REQUEST","USER_LOGOUT_SUCCESS","USER_LOGOUT_FAIL","USER_REGISTER_REQUEST","USER_REGISTER_SUCCESS","USER_REGISTER_FAIL","USER_SIGNIN_REQUEST","USER_SIGNIN_SUCCESS","USER_SIGNIN_FAIL","GET_BIO_REQUEST","GET_BIO_SUCCESS","GET_BIO_FAIL","UPDATE_BIO_REQUEST","UPDATE_BIO_SUCCESS","UPDATE_BIO_FAIL","UPLOAD_PIC_REQUEST","UPLOAD_PIC_SUCCESS","UPLOAD_PIC_FAIL","GET_PIC_REQUEST","GET_PIC_SUCCESS","GET_PIC_FAIL","logout","dispatch","getState","userSignin","userInfo","remove","type","post","headers","access_token","error","payload","message","register","username","email","password","bio","addressId","data","address_id","console","log","response","signin","set","JSON","stringify","updateBio","user_id","put","getBio","get","uploadPic","data1","userPic"],"mappings":"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","sourcesContent":["import Axios from \"axios\";\nimport Cookie from 'js-cookie';\nimport {\n  USER_LOGOUT_REQUEST,\n  USER_LOGOUT_SUCCESS,\n  USER_LOGOUT_FAIL,\n  USER_REGISTER_REQUEST,\n  USER_REGISTER_SUCCESS,\n  USER_REGISTER_FAIL,\n  USER_SIGNIN_REQUEST,\n  USER_SIGNIN_SUCCESS,\n  USER_SIGNIN_FAIL,\n  GET_BIO_REQUEST,\n  GET_BIO_SUCCESS,\n  GET_BIO_FAIL,\n  UPDATE_BIO_REQUEST,\n  UPDATE_BIO_SUCCESS,\n  UPDATE_BIO_FAIL,\n  UPLOAD_PIC_REQUEST,\n  UPLOAD_PIC_SUCCESS,\n  UPLOAD_PIC_FAIL,\n  GET_PIC_REQUEST,\n  GET_PIC_SUCCESS,\n  GET_PIC_FAIL,\n} from \"../constants/userConstants\";\n\nconst logout = () => async (dispatch, getState) => {\n  const { userSignin: { userInfo } } = getState();\n  Cookie.remove(\"userInfo\");\n  dispatch({ type: USER_LOGOUT_REQUEST });\n  try {\n    await Axios.post(\"https://tangerinemusic.herokuapp.com/signout\", {}, {\n        headers: {\n          \"Authorization\": ' Bearer ' + userInfo.access_token\n        }\n      });\n    dispatch({ type: USER_LOGOUT_SUCCESS });\n  } catch (error) {\n    dispatch({ type: USER_LOGOUT_FAIL, payload: error.message });\n  }\n}\n\nconst register = (username, email, password, bio, addressId) => async (dispatch) => {\n  dispatch({ type: USER_REGISTER_REQUEST, payload: { username, email, password, bio, addressId } });\n  try {\n    const { data } = await Axios.post(\"https://tangerinemusic.herokuapp.com/register\", { username, email, password, bio, address_id: addressId});\n    dispatch({ type: USER_REGISTER_SUCCESS, payload: data });\n  } catch (error) {\n    console.log(error.response.data['message']);\n    dispatch({ type: USER_REGISTER_FAIL, payload: error.response.data['message'] });\n  }\n}\n\nconst signin = (username, password) => async (dispatch) => {\n  dispatch({ type: USER_SIGNIN_REQUEST, payload: { username, password } });\n  try {\n    const { data } = await Axios.post(\"https://tangerinemusic.herokuapp.com/signin\", { username, password });\n    dispatch({ type: USER_SIGNIN_SUCCESS, payload: data });\n    Cookie.set('userInfo', JSON.stringify(data));\n}\n  catch (error) {\n    dispatch({ type: USER_SIGNIN_FAIL, payload: error.response.data['message'] });\n  }\n}\n\nconst updateBio = (bio) => async (dispatch, getState) => {\n  const { userSignin: { userInfo } } = getState();\n  const user_id = userInfo.user_id;\n  dispatch({ type: UPDATE_BIO_REQUEST});\n  try {\n    const { data } = await Axios.put(\"https://tangerinemusic.herokuapp.com/updatebio/\"+user_id, { bio }, {\n      headers: {\n        \"Authorization\": ' Bearer ' + userInfo.access_token\n      }\n    });\n    dispatch({ type: UPDATE_BIO_SUCCESS, payload: data });\n  } catch (error) {\n    console.log(error.response)\n    dispatch({ type: UPDATE_BIO_FAIL, payload: error.response.data['message'] });\n  }\n}\n\nconst getBio = (user_id) => async (dispatch) => {\n  dispatch({ type: GET_BIO_REQUEST});\n  try {\n    const { data } = await Axios.get(\"https://tangerinemusic.herokuapp.com/userbio/\"+user_id, {});\n    dispatch({ type: GET_BIO_SUCCESS, payload: data });\n  } catch (error) {\n    console.log(error.response)\n    dispatch({ type: GET_BIO_FAIL, payload: error.message });\n  }\n}\n\nconst uploadPic = (data1) => async (dispatch, getState) => {\n  const { userSignin: { userInfo } } = getState();\n  dispatch({ type: UPLOAD_PIC_REQUEST});\n  try {\n    const { data } = await Axios.put(\"https://tangerinemusic.herokuapp.com/upload/avatar\", data1, {\n      headers: {\n      \"Authorization\": ' Bearer ' + userInfo.access_token,\n      'Content-Type': 'multipart/form-data'\n    }\n    })\n    dispatch({ type: UPLOAD_PIC_SUCCESS, payload: data });\n  } catch (error) {\n    console.log(error.response)\n    dispatch({ type: UPLOAD_PIC_FAIL, payload: error.message });\n  }\n}\n\nconst userPic = (user_id) => async (dispatch, getState) => {\n  dispatch({ type: GET_PIC_REQUEST});\n  try {\n    const { data } = await Axios.get(\"https://tangerinemusic.herokuapp.com/avatar/\"+user_id, {});\n    dispatch({ type: GET_PIC_SUCCESS, payload: data });\n  } catch (error) {\n    console.log(error.response);\n    dispatch({ type: GET_PIC_FAIL, payload: error.message });\n  }\n}\n\nexport {\n  logout,\n  register,\n  signin,\n  updateBio,\n  getBio,\n  uploadPic,\n  userPic\n};"]},"metadata":{},"sourceType":"module"}